<div *ngIf="isLoaded" class="row">
  <div class="col-md-7 order-2 order-2 order-xl-1 panel bigger">
    <h1>{{ content.label }}</h1>
    <mat-tab-group>
      <mat-tab label="PDF">
        <iframe [src]="content.embed_uri" style="width:100%; height:900px;" frameborder="0"></iframe>
      </mat-tab>
      <mat-tab label="Plaintext">
        <div [innerHTML]="content.text | keepHtml"></div> 
      </mat-tab>
    </mat-tab-group>      
  </div>
  <div class="col-md-4 order-1 order-xl-2 panel bigger">
    <h2>Download</h2>
    <p *ngIf="content.filename">
      <a href="{{ content.uri }}">
        <img class="download" src="assets/download.svg" alt="Download icon" /> {{ content.filename }} ({{ content.filesize }})
      </a>
    </p>
    <table>
      <tbody>
        <tr *ngIf="content.document_type">
          <th scope="row">Document type</th>
          <td>{{ content.document_type }}</td>
        </tr>
        <tr *ngIf="content.assignment">
          <th scope="row">Assignment</th>
          <td>{{ content.assignment }}</td>
        </tr>
        <tr *ngIf="content.institution">
          <th scope="row">Institution</th>
          <td>{{ content.institution }}</td>
        </tr>
        <tr *ngIf="content.semester">
            <th scope="row">Term</th>
            <td>{{ content.semester }} {{ content.year }}</td>
        </tr>
        <tr *ngIf="content.course">
          <th scope="row">Course</th>
          <td>{{ content.course }}</td>
        </tr>
        <tr *ngIf="content.length">
            <th scope="row">Length</th>
            <td>{{ content.length }}</td>
        </tr>
        <tr *ngIf="content.mode">
            <th scope="row">Mode</th>
            <td>{{ content.mode }}</td>
        </tr>
        <tr *ngIf="content.file_type">
            <th scope="row">File type</th>
            <td>{{ content.file_type }}</td>
        </tr>
      </tbody>
    </table>
		<div *ngIf="relatedTexts.length">
			<h3>Related corpus texts</h3>
			<ul *ngFor="let result of relatedTexts">
				<li><a routerLink="/corpus/{{ result.filename }}" [queryParams]="{ search: searchQuery }" routerLinkActive="active">{{ result.assignment }} from {{ result.semester }} {{ result.year }}</a></li>
			</ul>
    </div>
		<div *ngIf="relatedResources.length">
			<h3>Related repository materials</h3>
			From the {{ content.institution }} {{ content.course }} {{ content.assignment }} assignment (all instructors)
			<ul *ngFor="let result of relatedResources">
				<li><a routerLink="/repository/{{result.id}}" routerLinkActive="active">{{result.document_type}} from {{ result.course}}, {{ result.semester }} {{ result.year }}</a></li>
			</ul>
		</div>
  </div>
</div>